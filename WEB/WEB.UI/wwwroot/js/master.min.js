function beginSearch(){$(".search_product").html('<svg class="icon-us refresh"><use xlink:href="/images/icons/icon.svg#refresh"><\/use><\/svg>')}function completeSearch(n){$(".search_product").html('<svg class="icon-us"><use xlink:href="/images/icons/icon.svg#search"><\/use><\/svg>');var t=n.responseJSON.url_redirect;window.location.href=t}function beginClientRegister(){$(".btn-create-new-client").addClass("placeholder");$(".btn-create-new-client").prop("disabled",!0)}function completeClientRegister(n){$(".btn-create-new-client").removeClass("placeholder");$(".btn-create-new-client").prop("disabled",!1);var t=n.responseJSON;switch(t.status){case SUCCESS:obj_client.reset_form();location.reload();break;case ERROR:case FAILED:completeClientRegister;$(".error-client-summery").html(t.msg)}}function beginClientLogin(){$(".btn_login_client").addClass("placeholder");$(".btn_login_client").prop("disabled",!0);$(".btn_login_client").html("Đang xử lý...")}function completeClientLogin(n){$(".btn_login_client").removeClass("placeholder");var t=n.responseJSON;t!=undefined&&(t.status==SUCCESS?(localStorage.removeItem(VOUCHER_KEY),localStorage.removeItem(CART_INFO_KEY),localStorage.removeItem(ADDRESS_RECEIVER_ID),location.reload()):($(".btn_login_client").prop("disabled",!1),$(".error-login-client-summery").html(t.msg),$(".btn_login_client").html("Đăng nhập")))}function beginClientForgotResponse(){}function completeClientForgotResponse(n){$("#EmailFogot-error").remove();n.responseJSON.status==SUCCESS?obj_general.send_mail_change_pass_success():$(".email_forgot_error").append('<span id="EmailFogot-error" class="">'+n.responseJSON.msg+"<\/span>")}function beginClientforget(){}function completeClientforget(n){$(".frm_client_sercurity").after(n.responseText);$(".frm_client_sercurity").css("display","none")}var obj_search,cart_summery,obj_client,survey_time,aff;if(function(n){"use strict";function i(){n(window).scroll(function(){n(window).scrollTop()>=200?n("#to_top").fadeIn():n("#to_top").fadeOut()});n("#to_top").click(function(){return n("html, body").animate({scrollTop:0}),!1})}function r(){var t=n(window).innerWidth();1200>t}function u(){var t=n(".scrollbar-inner");t.length>0&&t.scrollbar()}function f(){n(".open-popup-link").magnificPopup({type:"inline",midClick:!0,mainClass:"mfp-with-zoom",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,removalDelay:300})}function e(){var t=n(".sticky");t.length>0&&Stickyfill.add(t)}function o(){var i=n("#search").width(),t=n(".op_thuonghieu").width()+25,r=i-t;n(".op_thuonghieu").css("width",t+"px");n("#search .warp-search").css("width",r+"px");n(".op_thuonghieu .options").find("a").click(function(){var i=n(this).html();n(".op_thuonghieu .txt_hang span").html(i);n(".op_thuonghieu").css("width","auto");var r=n("#search").width(),t=n(".op_thuonghieu").width()+70,u=r-t;n(".op_thuonghieu").css("width",t+"px");n("#search .warp-search").css("width",u+"px")});n(".warp-search").find(".input_search").click(function(){n(".warp-search").find(".suggest-search").hide();n(".dropdown-content").slideUp();n(this).hasClass("active")?(n(this).removeClass("active"),n(this).next(".suggest-search").hide()):(n(this).addClass("active"),n(this).next(".suggest-search").show())});n(document).click(function(){n(".warp-search").find(".input_search").removeClass("active");n(".warp-search").find(".suggest-search").hide()});n(".warp-search .input_search").click(function(n){n.stopPropagation()})}function s(){n(".dropdown").find(".dropbtn").click(function(){n(".dropdown").find(".dropdown-content").slideUp();n(".suggest-search").hide();n(this).next().css("display")=="none"?(n(".dropdown-content").slideUp(),n(this).next().stop(!0,!0).slideDown(),n(".dropdown").removeClass("active"),n(this).parent().addClass("active")):(n(this).parent().find(".dropdown-content").slideUp(),n(".dropdown").removeClass("active"))});n(".onclick >a").click(function(){n(".onclick >div").slideUp();n(this).next().css("display")=="none"?n(this).next().slideDown():n(this).next().slideUp()});n(document).click(function(){n(".dropdown .dropbtn, .onclick >a").removeClass("active");n(".dropdown").find(".dropdown-content").slideUp();n(".onclick >a").next().slideUp()});n(".dropdown .dropbtn, .onclick >a").click(function(n){n.stopPropagation()});n(".nav_setting a").click(function(t){n(".nav_setting a").removeClass("active");n(this).hasClass("active")?n(this).removeClass("active"):n(this).addClass("active");t.preventDefault();var i=n(this).attr("href");n(".content_setting .tab-content").not(i).css("display","none");n(i).css("display","block")});n(".nav-bar").click(function(){n(this).hasClass("active")?(n(this).removeClass("active"),n(".warp_menu ").addClass("active")):(n(this).addClass("active"),n(".warp_menu ").removeClass("active"))});n(".b3_nhtt ul li").click(function(){n(this).addClass("tc_nhtt");n(this).siblings().removeClass("tc_nhtt")})}function h(){n(".tab-default a").click(function(t){n(".tab-default a").removeClass("active");n(this).hasClass("active")?n(this).removeClass("active"):n(this).addClass("active");t.preventDefault();var i=n(this).attr("href");n(".tab-container > div").not(i).css("display","none");n(i).fadeIn()})}function c(){var n=new Swiper(".slide_banner .swiper-container",{slidesPerView:1,loop:!0,effect:"fade",autoplay:{delay:3e3},pagination:{el:".swiper-pagination",clickable:!0}}),t=new Swiper(".slide_category .swiper-container",{slidesPerView:6,loop:!0,autoplay:{delay:5e3},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{1190:{slidesPerView:4},768:{slidesPerView:3}}}),i=new Swiper(".box-thuong-hieu .swiper-container",{slidesPerView:9,spaceBetween:15,loop:!0,autoplay:{delay:5e3},breakpoints:{1190:{slidesPerView:6},768:{slidesPerView:5},767:{slidesPerView:4},576:{slidesPerView:3}}}),r=new Swiper(".slide_sale .swiper-container",{slidesPerView:5,slidesPerGroup:5,spaceBetween:10,simulateTouch:!1,navigation:{nextEl:".slide_sale .swiper-button-next",prevEl:".slide_sale .swiper-button-prev"},scrollbar:{el:".swiper-scrollbar",draggable:!0},breakpoints:{1190:{slidesPerView:4,slidesPerGroup:4,spaceBetween:10},768:{slidesPerView:3,slidesPerGroup:3,spaceBetween:10},767:{slidesPerView:2,slidesPerGroup:2,spaceBetween:10},576:{slidesPerView:1,slidesPerGroup:1,spaceBetween:10}}}),u=new Swiper(".slide_box_video .swiper-container",{slidesPerView:2,spaceBetween:28,loop:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{576:{slidesPerView:1}}}),f=new Swiper(".slide_sale2 .swiper-container",{slidesPerView:5,spaceBetween:18,navigation:{nextEl:".slide_sale2 .swiper-button-next",prevEl:".slide_sale2 .swiper-button-prev"},breakpoints:{1190:{slidesPerView:4},768:{slidesPerView:3},576:{slidesPerView:2}}})}function l(){n("#login-popup .form .tab").find("a").click(function(t){n("#login-popup .form .tab").find("a").removeClass("active");n(this).hasClass("active")?n(this).removeClass("active"):n(this).addClass("active");t.preventDefault();var i=n(this).attr("href");n("#login-popup .form .tab-content").not(i).css("display","none");n(i).css("display","block")})}function a(){n(".datepicker-input").Zebra_DatePicker({format:"d/m/Y"})}var v=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};jQuery(function(n){n(".warp_menu").mouseover(function(){n(".nav-bar").addClass("active");n(this).addClass("active")});n(".nav-bar").mouseleave(function(){n(this).removeClass("active");n(".warp_menu").removeClass("active")});n(".warp_menu").mouseleave(function(){n(".nav-bar").removeClass("active");n(".warp_menu").removeClass("active")});n(".warp_menu a.link").mouseover(function(){var t=n(this),i=t.attr("rel"),r=n("#"+i);r.show().siblings(".child-box").hide()});n(".warp_menu .col-1 li").mouseover(function(){n(this).addClass("active").siblings(".warp_menu .col-1 li").removeClass("active")});n(".nav-bar").mouseover(function(){n(".warp_menu").addClass("active");n(this).addClass("active")})});n(function(){i();u();f();e();o();s();h();c();l();a();n('[data-toggle="tooltip"]').tooltip({html:!0})});n(window).on("load resize",function(){r()})}(jQuery),$(document).ready(function(){}),"loading"in HTMLImageElement.prototype){const n=document.querySelectorAll('img[loading="lazy"]');n.forEach(n=>{n.src=n.dataset.src})}else{const n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/4.1.8/lazysizes.min.js";document.body.appendChild(n)}var saveSearch=!1,delay_search=500,min_length_search=2;jQuery(document).ready(function(){typeof Storage!="undefined"&&(obj_search.bin_keyword_history(),$("#remove_history_search").click(function(){obj_search.remove_history_search()}),$("#add_history_search").click(function(){var n=$(".keyword_search").val()==null?"":$(".keyword_search").val().trim();obj_search.add_history_search(n)}),$(".search_type a").click(function(){var n=$(this).data("groupid");$("#txt_search_type").val(n)}),setInterval("obj_search.autocomplete()",delay_search),$(".keyword_search").keyup(function(){saveSearch||(saveSearch=!0)}))});obj_search={autocomplete:function(){if(saveSearch){var n=$(".keyword_search").val(),t=parseInt($("#txt_search_type").val());saveSearch=!1;n.length>min_length_search&&obj_search.search_product(n,t)}},search_product:function(n,t){$(".suggest_search_data").html("");$.ajax({contentType:"application/json; charset=utf-8",dataType:"json",type:"POST",url:"/product/search-suggest.json?input_search="+n+"&search_type="+t,success:function(n){n.result_search?$(".suggest_search_data").html(n.products):console.log("search not found !")},failure:function(n){console.log(n)}})},add_history_search:function(n){if(n.length>0){var t=localStorage.getItem(HISTORY_SEARCH);t!=null?(","+t+",").indexOf(","+n+",")==-1&&(t=n+","+t,obj_search.order_top_history_search(TOTAL_KEYWORD_HISTORY_SEARCH,t)):(t=n,localStorage.setItem(HISTORY_SEARCH,t))}},bin_keyword_history:function(){var i=localStorage.getItem(HISTORY_SEARCH),t,r,n;if(i!=null)for(t=i.split(","),$(".history-search").append("<h3>Lịch sử tìm kiếm<\/h3><a class='clear'id='remove_history_search'>Xóa tất cả<\/a>"),r=t.length,n=0;n<=r-1;n++)$(".history-search").append("<li><a>"+t[n]+"<\/a><\/li>")},remove_history_search:function(){localStorage.removeItem(HISTORY_SEARCH)},order_top_history_search:function(n,t){var i=t.split(","),r,u;if(t!=null&&(r=i.length-TOTAL_KEYWORD_HISTORY_SEARCH,r>0)){for(u=0;u<=r-1;u++){const n=i.length-1;i.splice(n,1)}t=i.join(",")}localStorage.setItem(HISTORY_SEARCH,t)}};jQuery(document).ready(function(){var n=document.URL.toLowerCase();n.indexOf("carts/view")>=0?$("#cart_summery").append('<a class="btn btn-order btn-confirm-cart">XÁC NHẬN GIỎ HÀNG<\/a>'):$(".voucher_box").remove();(n.indexOf("carts/view")>=0||n.indexOf("payment/")>=0)&&cart_summery.load_cart_info()});$("#cart_summery").on("click",".btn-confirm-cart",function(){var n=$(".chitiet_giohang").find("input[type='checkbox']:checked");if(n.length==0){obj_general.alert("Bạn vẫn chưa chọn sản phẩm nào để mua.");return}userAuthorized?(localStorage.removeItem(ORDER_HISTORY_LAST),cart_summery.submitProductChoice()):$(".load-login").click()});$("#cart_summery").on("click",".btn-confirm-payment",function(){var n=parseInt($("#hd_order_id").val()),t=parseInt($(this).attr("data-addresskey")),i=parseInt($(this).attr("data-paykey")),r=$(this).attr("data-value"),u=parseInt($(this).attr("data-labelid")),f=cart_summery.getVoucherName();checkout.confirm(u,t,i,r,f,is_force_pay,n)});cart_summery={add_to_cart:function(n,t,i,r){n!=undefined&&n!=""&&(t=t==null?"":t,$.ajax({url:"/Carts/add-to-cart",type:"POST",data:{product_code:n,seller_id:t,label_id:i},dataType:"json",success:function(n){if(setTimeout(function(){$(".add-product-success").removeClass("open")},1400),$(".add_to_cart").removeClass("disable-click"),n.status==SUCCESS){var t=parseInt($(".total_carts").html())+1;$(".total_carts").html(t);r&&(window.location.href="/Carts/view.html")}else n.status==EMPTY&&(n.is_refresh?(alert("Thông tin sản phẩm đã được thay đổi. Xin vui lòng chờ trong giây lát."),location.reload()):(alert("Sản phẩm đã hết hàng. Xin vui lòng liên hệ với bộ phận CSKH để được hỗ trợ"),console.log(n.msg)))}}))},submitProductChoice:function(){var n=cart_summery.getCartsChecked(),t=voucher.getVoucherSave(),i=voucher.getChoiceLabelId();$.ajax({dataType:"json",type:"POST",data:{lst_key_id:n,list_voucher:t,label_id:i},url:"/Carts/save-carts-choice.json",success:function(n){n.status==SUCCESS?(cart_summery.save(n.cart_info),n.voucher_change!=undefined&&n.voucher_change!=""&&voucher.calulateVoucherSale(n.voucher_change,!0),window.location.href=n.link_next_step):(voucher.empty_voucher(),obj_general.alert(n.msg))},failure:function(n){console.log(n)}})},getCartsChecked:function(){var n="",r=$(".chitiet_giohang").find("input[type='checkbox']:checked"),u=r.length,t,i;if(u>0)for(t=0;t<=u-1;t++)i=r[t].getAttribute("data-keyid"),i!=null&&(n+=n==""?"":",",n+=i);return n},countTotalProd:function(){var i=0,r=$(".chitiet_giohang").find("input[type='checkbox']:checked"),u=r.length,n,t;if(u>0)for(n=0;n<=u-1;n++)t=r[n].getAttribute("data-keyid"),t!=null&&(i+=parseInt($(".quantity_key_"+t).val()));return i},getVoucherName:function(){var i=localStorage.getItem(VOUCHER_KEY),n=JSON.parse(i),t;return n!=undefined?(t=n.voucher,t.map(n=>n.vc_name).join(", ")):""},save:function(n){var t={cart_info:n};localStorage.setItem(CART_INFO_KEY,JSON.stringify(t))},load_cart_info:function(){var f=document.URL.toLowerCase(),t=localStorage.getItem(CART_INFO_KEY),n;if(t!=null)n=JSON.parse(t).cart_info,$(".total_amount_vnd").html(parseFloat(n.total_price_cart).toLocaleString()+" <em>đ<\/em>"),$(".total_discount_amount").html(parseFloat(n.total_price_sale_vc).toLocaleString()+" <em>đ<\/em>"),$(".total_amount_last_vnd").html(parseFloat(n.total_amount_last).toLocaleString()+" <em>đ<\/em>");else{var i=$(".total_amount_vnd").data("totalamountcart"),r=$(".total_discount_amount").data("totaldiscountamount"),u=$(".total_amount_last_vnd").data("totalamountlast");$(".total_amount_vnd").html(i.toLocaleString()+" <em>đ<\/em>");$(".total_discount_amount").html(r.toLocaleString()+" <em>đ<\/em>");$(".total_amount_last_vnd").html(u.toLocaleString()+" <em>đ<\/em>")}},remove_cart_info:function(){localStorage.removeItem(CART_INFO_KEY)}};jQuery(document).ready(function(){obj_client.check_authent_login()});$(document.body).on("click",".load-login",function(){$(".frm_client_sercurity").removeAttr("style");$(".frm_client_forgot").css("display","none");$.ajax({url:"/client/login-show",type:"POST",dataType:"json",success:function(n){n.status==SUCCESS?($(".user-login").html(n.view_login_client),$(".user-register").html(n.view_register_client)):($(".user-login").html(n.msg),$(".user-register").html(n.msg))}})});$("#EmailFogot").keyup(function(){$(this).removeClass("error");$("#EmailFogot-error").remove()});obj_client={check_authent_login:function(){var n=$("#is_show_popup_login").val()=="True"?!0:!1;n&&$(".load-login").click()},reset_form:function(){$("#formClientRegister").find("input:text,textarea").val("")},sendCodeVerify:function(n,t){$(t).prop("disabled",!0);$(".valid-email").html("");$(t).html("<svg class='icon-us refresh'><use xlink:href='images/icons/icon.svg#refresh'><\/use><\/svg>Đang gửi...");$.ajax({url:"client/otp-codes",type:"POST",data:{email:n},dataType:"json",headers:{RequestVerificationToken:$('input:hidden[name="__RequestVerificationToken"]').val()},success:function(n){if($(t).prop("disabled",!1),n.status==SUCCESS){$(".valid-email").html('<span class="text-danger field-validation-error error" style="color:#236852"  data-valmsg-replace="true"><span id="Email-error" class="">'+n.msg+"<\/span><\/span>");timer.clear_interval_verify();$(t).html("<svg class='icon-us'><use xlink:href='images/icons/icon.svg#vector'><\/use><\/svg>Gửi lại (<span id='count_down_verify' class='seconds'>...<\/span>s)");var i=new Date(n.year,n.month,n.day,n.hours,n.minutes,n.seconds);timer.initializeClock("btn_send_code",i)}}})}};jQuery(document).ready(function(){var n=document.URL.toLowerCase();banner.show_popup_home("01-04-2022","https://usexpress.vn/","/images/graphics/Popup_home.jpg","https://usexpress.vn/store/costco")});survey_time=null;$(".btn_send_feedback").click(function(){var t=$("#function_id").val(),n=$("#feedback_version_new").val();if(n==""||n==null||n.trim()==""){$("#error_survey_input").html("Vui lòng không để trống phần Nội dung góp ý cải thiện.");$("#error_survey_input").css("display","");return}survey.add_new(t,n)});$(".btn_copy").click(function(){var t=$(this).data("valueid"),i=$("#"+t).val(),n;i.length>20&&i.indexOf("usexpress.vn")>=0?(n=document.getElementById(t),n.select(),n.setSelectionRange(0,99999),navigator.clipboard.writeText(n.value),$(this).append('<span class="tip top btn_link">Copy link thành công<\/span>'),setTimeout("$('.btn_link').remove();",600)):obj_general.alert("Link không hợp lệ")});$(".btn_undo_version").click(function(){$.magnificPopup.close()});$(".cart_view").click(function(){userAuthorized?window.location.href="/Carts/view":$(".load-login").click()});$(document.body).on("click",".btn_destroy",function(){$.magnificPopup.close()});$(document.body).on("click",".mfp-img",function(){window.location.href="/"});var banner={get_expired:function(n){var t=n.split("-"),i=new Date(t[2],t[1]-1,t[0]);return i.getTime()},show_popup_home:function(n,t,i,r="#"){var h=document.URL.toLowerCase(),u,n,f,e,o,s;if(h==t){if(u=parseInt((new Date).getTime()),n=this.get_expired(n),n<u){localStorage.removeItem("POPUP_HOME");return}(f=JSON.parse(localStorage.getItem("POPUP_HOME")),f!=null&&(e=parseInt(f.expired_display),u<e))||(o={expired_display:(new Date).getTime()+18e5},localStorage.setItem("POPUP_HOME",JSON.stringify(o)),s=r!="#"?'<div style="display:block; text-align:center;" href="javascripts:;" ><img class="mfp-img" src="/images/graphics/Popup_home.jpg" style="max-height: 561px; cursor: pointer;" onclick="window.open(\''+r+"', '_blank');\"><\/a>":'<div style="display:block; text-align:center;"><img class="mfp-img" src="/images/graphics/Popup_home.jpg" style="max-height: 561px; cursor: pointer;"><\/div>',$.magnificPopup.open({items:{src:s,type:"inline"}}),$(".mfp-content").css("width","auto"))}}},survey={add_new:function(n,t){if(survey_time!=null){var i=new Date,u=i.getTime()-survey_time.getTime(),f=u/1e3,r=Math.abs(f);if(r<30){$("#error_survey_input").html("Vui lòng chờ "+(30-parseInt(r))+"s trước khi gửi góp ý tiếp theo");$("#error_survey_input").css("display","");return}survey_time=i;$("#feedback_version_new").val("");$("#function_id").val("-1")}$.ajax({dataType:"json",type:"POST",url:"client/survey/add-new",data:{function_id:n,feedback:t},success:function(n){if(n.status==SUCCESS){obj_general.open_lightbox_msg("thanks_feedback");var t=new Date;survey_time=t}else $("#error_survey_input").html(n.msg),$("#error_survey_input").css("display",""),$("#function_id").val("-1");$("#feedback_version_new").val("");$("#function_id").val("-1")},failure:function(n){console.log(n)}})}},obj_general={send_mail_change_pass_success:function(){var n='<div class="notifi-popup white-popup" style="max-width: 750px;"><div class="content_poup center"><p class="mb15"><img src="images/icons/tam-khoa.png">';n+='<\/p><h3 class="txt_20 mb15 medium color_ylow">Lấy lại mật khẩu<\/h3>';n+='<p style="color:#585858">Thông tin thay đổi mật khẩu đã được gửi tới Email của bạn. Vui lòng chọn vào đường dẫn và tiến hành thay đổi mật khẩu tại website UsExpress<br><\/p>';n+='<a href="/" class="btn medium flex" style="width:200px">Quay về trang chủ<\/button><\/div><\/div>';$.magnificPopup.open({items:{src:n,type:"inline"},mainClass:"mfp-with-zoom"});$(".mfp-close").remove()},alert_success_aff:function(){var n='<div class="notifi-popup white-popup"><div class="content_poup center"><h2 class="color_green2 txt_16 medium mb20">Đăng ký affiliate thành công!<\/h2><p>Bạn đã đăng ký thành công chương trình US Affiliate';n+=' .Hãy bắt đầu tạo link giới thiệu và chia sẻ cùng bạn bè để hưởng hoa hồng.<\/p><button class="btn txt_14 btn_create_aff">Tạo link giới thiệu<\/button><p class="mt15"style="color:#6F6F6F">';n+='Bạn cần tìm hiểu thêm ? <a class="color_green2 underline" href="/chinh-sach-us-express-affiliate-363">Giới thiệu chương trình<\/a><\/p ><\/div ><\/div > ';$.magnificPopup.open({items:{src:n,type:"inline"},mainClass:"mfp-with-zoom"});$(".mfp-close").remove()},alert:function(n){$.magnificPopup.open({items:{src:popup_ok.replace("{message_question}",n),type:"inline"},mainClass:"mfp-with-zoom"});$(".mfp-close").remove()},show_lightbox_success:function(n){var t='<div id="notifi-popup" class="notifi-popup white-popup">';t+='<div class="content_poup center">';t+='<p class="mb15"><img src="images/graphics/verifiler.png"><\/p>';t+="<p>"+n+"<\/p>";t+="<\/div>";t+='<button title="Close (Esc)" type="button" class="mfp-close">×<\/button>';t+="<\/div>";$("#pop-up-location").html(t);obj_general.open_lightbox_msg("notifi-popup")},open_lightbox_msg:function(n){$.magnificPopup.open({items:{src:"#"+n},type:"inline"})},close_lightbox:function(){$.magnificPopup.close()},replace_all:function(n,t,i){if(n!=undefined){for(var r=0,u="",f=t.length;r<n.length;)n.substr(r,f)==t?(u+=i,r+=f):(u+=n.charAt(r),r++);return u}},update_aff:function(){var u=window.location.href,r=new URL(u),n=r.searchParams.get("utm_source"),i,t;if(n==null||n.trim()=="")if(t=this.readCookie("_aff_sid"),i=this.readCookie("_aff_network"),i!=null)switch(i){case"accesstrade":window.localStorage.setItem("aff",t+",454,"+i+","+i);break;case"adpia":window.localStorage.setItem("aff",t+",0,"+i+","+i);break;case"usexpress":window.localStorage.setItem("aff",t+",0,"+i+","+i)}else window.localStorage.removeItem("aff");else switch(n){case"accesstrade":t=this.readCookie("_aff_sid");window.localStorage.setItem("aff",t+",454,"+n+","+n);break;case"adpia":this.setCookie("_aff_sid",r.searchParams.get("utm_medium"),30);this.setCookie("_aff_network",n,30);t=this.readCookie("_aff_sid");window.localStorage.setItem("aff",t+",0,"+n+","+n);break;case"usexpress":this.setCookie("_aff_sid",r.searchParams.get("utm_medium"),30);this.setCookie("_aff_network",n,30);t=this.readCookie("_aff_sid");window.localStorage.setItem("aff",t+",0,"+n+","+n)}},readCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1,t.length);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return null},setCookie:function(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toUTCString());document.cookie=n+"="+(t||"")+u+"; path=/"}},product_general={get_product_history:function(n){var r=localStorage.getItem(PRODUCT_HISTORY),t,i,u;r!=null?(t=JSON.parse(r),i=n==null?t:t.filter(function(t){return t.product_code!=n}),i.length>=LIMIT_PRODUCT_HIST?(u=i.slice(0,LIMIT_PRODUCT_HIST),$.ajax({url:"/Product/render-product-history.json",type:"POST",data:{j_data:JSON.stringify(u)},dataType:"json",success:function(n){n.status==SUCCESS?$(".product-history").html(n.data):console.log(n.msg)}})):$(".product-history").remove()):$(".product-history").remove()}},timeinterval,timer={getDateTimeRemaining:function(n){var t=Date.parse(n)-Date.parse(new Date),i=Math.floor(t/1e3%60),r=Math.floor(t/6e4%60),u=Math.floor(t/36e5%24),f=Math.floor(t/864e5);return{total:t,days:f,hours:u,minutes:r,seconds:i}},getTimeRemaining:function(n){var t=Date.parse(n)-Date.parse(new Date),i=Math.floor(t/1e3%60);return{total:t,seconds:i}},initializeClockDate:function(n,t){function r(){var n=timer.getDateTimeRemaining(t);f.innerHTML=("0"+n.hours).slice(-2);e.innerHTML=("0"+n.minutes).slice(-2);o.innerHTML=("0"+n.seconds).slice(-2);n.total<=0&&clearInterval(u)}var i=document.getElementById(n),f=i.querySelector(".hours"),e=i.querySelector(".minutes"),o=i.querySelector(".seconds"),u;r();u=setInterval(r,1e3)},initializeClock:function(n,t){function i(){var i=timer.getTimeRemaining(t);u.innerHTML=("0"+i.seconds).slice(-2);i.seconds<=0&&(clearInterval(timeinterval),$("#"+n).html("<svg class='icon-us'><use xlink:href='images/icons/icon.svg#vector'><\/use><\/svg>Gửi mã xác thực"))}var r=document.getElementById(n),u=r.querySelector(".seconds");i();timeinterval=setInterval(i,1e3)},clear_interval_verify:function(){clearInterval(timeinterval)}},fb={ShowChatAuto:function(){FB.CustomerChat.showDialog();$(".fb-customerchat").show();$(".fb_cus").remove()},fbLogin:function(){FB.login(function(n){n.authResponse?(getFbUserData(),$("#popupdky_dnhap").modal("hide")):AddAlert("Thông báo","Bạn cần đăng nhập tài khoản Facebook để kết nối!",6e3,1)},{scope:"public_profile,email"})},getFbUserData:function(){FB.api("/me",{locale:"en_US",fields:"id,name,email,picture"},function(n){var t="{Email:'"+n.email+"',Id:'"+n.id+"',Name:'"+n.name+"',AvartarUrl:'"+n.picture.data.url+"',SourceLogin:'fb'}";$.post("/Account/LoginGoogleOrFacebook",{jsonPost:t},function(t){t.bResult?(localStorage.setItem("USEXPRESS_LOGIN_AUTO",n.email),$("#ajax_loading").css("display","none"),$("#ipReturUrl").val()==="myorder"?($("#ipReturUrl").val(""),location.href="/Account/myorder"):ReloadMenu()):($("#ajax_loading").css("display","none"),AddAlert("Thông báo",t.msg,1e4,0))})})}};jQuery(document).ready(function(){});$("#btn_register_aff").click(function(){aff.register()});$(".btn_add_link_aff").click(function(){var n=$("#txt_link_aff").val().trim();n.length<20?obj_general.alert("Link nhập không hợp lệ. Bạn hãy copy 1 link sản phẩm rồi dán vào đây nhé"):n.indexOf("utm_medium")>=0&&n.indexOf("aff_sid")>=0&&n.indexOf("utm_source")>=0||aff.add_link(n)});$(document.body).on("click",".btn_create_aff",function(){location.reload()});aff={get_affilliate_type:function(){return window.localStorage.getItem("aff")},register:function(){$.ajax({url:"/client/aff/register.json",type:"POST",dataType:"json",success:function(n){n.status==SUCCESS&&(localStorage.setItem(REFERRAL_ID_FIRST,n.referral_id),obj_general.alert_success_aff())}})},add_link:function(n){var t=localStorage.getItem(REFERRAL_ID_FIRST);n=`${encodeURIComponent(n)}`;$.ajax({url:"/client/aff/add-link",type:"POST",data:{link_aff:n,referral_first_id:t},dataType:"json",success:function(n){n.status==SUCCESS?($("#txt_link_aff_full").val(n.link_aff),$("#txt_link_aff").val("")):n.status==FAILED&&obj_general.alert(n.msg)}})}};